!function(a,b){"use strict";"function"==typeof define&&define.amd?define(function(){return b(a,a.document)}):"undefined"!=typeof module&&module.exports?module.exports=b(a,a.document):a.Notify=b(a,a.document)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function d(a){return"function"==typeof a}function e(a,b){if("string"!=typeof a)throw new Error("Notify(): first arg (title) must be a string.");if(this.title=a,this.options={icon:"",body:"",tag:"",lang:"en",notifyShow:null,notifyClose:null,notifyClick:null,notifyError:null,timeout:null},this.permission=null,"object"==typeof b){for(var c in b)b.hasOwnProperty(c)&&(this.options[c]=b[c]);d(this.options.notifyShow)&&(this.onShowCallback=this.options.notifyShow),d(this.options.notifyClose)&&(this.onCloseCallback=this.options.notifyClose),d(this.options.notifyClick)&&(this.onClickCallback=this.options.notifyClick),d(this.options.notifyError)&&(this.onErrorCallback=this.options.notifyError)}}var c=a.Notification;return e.isSupported=function(a){if(!c||!c.requestPermission)return!1;if("granted"===a||"granted"===c.permission)throw new Error("You must only call this before calling Notification.requestPermission(), otherwise this feature detect would trigger an actual notification!");try{new c("")}catch(b){if("TypeError"===b.name)return!1}return!0},e.needsPermission=c&&c.permission&&"granted"===c.permission?!1:!0,e.requestPermission=function(a,b){c.requestPermission(function(c){switch(c){case"granted":e.needsPermission=!1,d(a)&&a();break;case"denied":e.needsPermission=!0,d(b)&&b()}})},e.prototype.show=function(){this.myNotify=new c(this.title,{body:this.options.body,tag:this.options.tag,icon:this.options.icon,lang:this.options.lang}),this.options.timeout&&!isNaN(this.options.timeout)&&setTimeout(this.close.bind(this),1e3*this.options.timeout),this.myNotify.addEventListener("show",this,!1),this.myNotify.addEventListener("error",this,!1),this.myNotify.addEventListener("close",this,!1),this.myNotify.addEventListener("click",this,!1)},e.prototype.onShowNotification=function(a){this.onShowCallback&&this.onShowCallback(a)},e.prototype.onCloseNotification=function(a){this.onCloseCallback&&this.onCloseCallback(a),this.destroy()},e.prototype.onClickNotification=function(a){this.onClickCallback&&this.onClickCallback(a)},e.prototype.onErrorNotification=function(a){this.onErrorCallback&&this.onErrorCallback(a),this.destroy()},e.prototype.destroy=function(){this.myNotify.removeEventListener("show",this,!1),this.myNotify.removeEventListener("error",this,!1),this.myNotify.removeEventListener("close",this,!1),this.myNotify.removeEventListener("click",this,!1)},e.prototype.close=function(){this.myNotify.close()},e.prototype.handleEvent=function(a){switch(a.type){case"show":this.onShowNotification(a);break;case"close":this.onCloseNotification(a);break;case"click":this.onClickNotification(a);break;case"error":this.onErrorNotification(a)}},e});